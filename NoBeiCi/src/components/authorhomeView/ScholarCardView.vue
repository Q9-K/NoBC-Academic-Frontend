<template>
    <div class="scholar-card">
      <svg t="1703417859877" class="binded" v-if="this.isAuthorBinded" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3367" width="130" height="130"><path d="M511.321169 1.380674c-279.586517 0-506.247191 226.649169-506.247191 506.247191 0 279.586517 226.660674 506.247191 506.247191 506.247191s506.247191-226.660674 506.247191-506.247191c0-279.598022-226.660674-506.247191-506.247191-506.247191z m0 23.011236c266.884315 0 483.235955 216.35164 483.235955 483.235955s-216.35164 483.235955-483.235955 483.235955-483.235955-216.35164-483.235956-483.235955 216.35164-483.235955 483.235956-483.235955z m361.506516 542.466877A378.235685 378.235685 0 0 1 597.026517 872.183371 378.22418 378.22418 0 0 1 213.54427 755.274787l-3.290607-3.842877-8.755775 7.386607a389.695281 389.695281 0 0 0 398.462561 124.410247A389.695281 389.695281 0 0 0 883.286292 573.716135l0.851416-5.062472-11.321528-1.794876z m-127.861932 29.649977a269.104899 269.104899 0 0 1-183.077393 166.72791 269.116404 269.116404 0 0 1-242.365843-53.236494l-7.35209 8.790292a280.576 280.576 0 0 0 252.674876 55.491595A280.541483 280.541483 0 0 0 753.963146 605.080449l1.76036-4.602247-10.746248-3.957932z m-557.378157-72.059685l-21.745618 5.821842-9.814293 116.862562-0.149573 12.909304-0.609797 0.161078-6.592719-11.102921-66.92818-96.290517-21.849169 5.85636 93.931865 129.668314 17.258427-4.602247 16.499057-159.283775z m110.028224-29.477394l-90.434157 24.230832 38.716404 144.476045 91.561708-24.529978-4.096-15.290966-71.449887 19.145348-13.852764-51.694741 61.037303-16.349483-4.119011-15.383012-61.037304 16.349483-12.529618-46.73582 70.333843-18.846202-4.130517-15.371506z m79.204674-21.055281l-3.440179 0.862922-50.831821 13.611146 38.693394 144.384 20.100314-5.396135-16.775191-62.613573 34.401798-9.204494c7.892854-2.117034 14.819236-1.426697 20.790652 2.071011 5.373124 3.164045 9.181483 8.053933 11.413573 14.692674l0.690337 2.278112 3.532225 13.196944c1.242607 4.636764 2.818876 9.03191 4.740314 13.196944 1.645303 3.566742 3.773843 6.178517 6.408629 7.82382l1.346158 0.73636 20.721618-5.557214-0.632809-2.381663a18.696629 18.696629 0 0 1-7.651236-7.306067 43.042517 43.042517 0 0 1-4.003955-9.066427l-0.770877-2.634786-3.635775-13.588135c-2.301124-8.537169-5.994427-15.221933-11.125933-20.054292-5.12-4.83236-12.10391-7.444135-20.963236-7.823821 6.753798-5.292584 11.390562-11.206472 13.887281-17.764674 2.508225-6.558202 2.772854-13.542112 0.793888-20.95173-3.589753-13.369528-10.596674-22.401438-21.055281-27.118742-9.699236-4.372135-21.918202-4.843865-36.633888-1.403685z m100.950293-27.222292l-20.203866 5.407641 38.704899 144.48755 20.215371-5.40764-38.716404-144.487551z m130.036494-34.839011l-93.195506 24.967191 38.716405 144.476045 20.11182-5.384629-17.12036-63.902202 62.671102-16.798203-4.130517-15.371505-62.659596 16.786696-13.346517-49.819325 73.07218-19.571057-4.119011-15.383011z m44.411685-11.896809l-20.21537 5.407641 38.704898 144.48755 20.215371-5.419146-38.716404-144.476045z m-250.247191 90.710292c6.074966 3.164045 10.193978 8.813303 12.36854 16.947776 2.301124 8.594697 1.518742 15.670652-2.347146 21.204853-3.877393 5.545708-11.505618 9.837303-22.861663 12.886293l-28.683506 7.685752-13.691685-51.107955 30.72-8.226516c10.274517-2.761348 18.443506-2.554247 24.506966 0.609797z m377.510832-124.812944l-90.434158 24.230832 38.716405 144.476045 91.561708-24.529978L815.230562 494.741573l-71.449888 19.145348-13.852764-51.694741 61.037303-16.349483-4.119011-15.383012-61.037303 16.349484-12.529618-46.735821 70.333843-18.846202-4.130517-15.371506z m75.269753-20.100314l-3.612764 0.897438-46.747326 12.529618 38.716404 144.476045 46.747326-12.529618c19.386966-5.200539 33.446831-15.152899 42.156584-29.857079 8.168989-13.78373 10.332045-29.22427 6.500674-46.298606l-0.851415-3.451686-5.292585-19.74364c-4.924404-18.385978-14.842247-31.801528-29.765033-40.246652-13.979326-7.927371-29.937618-9.848809-47.863371-5.77582z m-674.804495-60.162877a389.292584 389.292584 0 0 0-69.194786 194.099776l-0.437214 6.765303 11.436584 0.621303a377.614382 377.614382 0 0 1 63.879191-189.54355l3.704809-5.407641-9.388584-6.535191z m711.357843 80.930517c9.492135 6.155506 16.165393 15.279461 20.00827 27.36036l0.897438 3.083505 5.338606 19.950742c3.681798 13.760719 2.761348 26.094742-2.818876 37.025079-5.568719 10.930337-15.221933 18.224899-28.971146 21.906696l-26.647011 7.133483-30.489888-113.813573 26.635506-7.133483c13.749213-3.681798 25.772584-2.186067 36.047101 4.487191z m-471.442697-133.350112A280.817618 280.817618 0 0 0 215.960449 454.702022l-0.816898 4.751821 11.310022 1.817887a269.346517 269.346517 0 0 1 196.354876-217.041977 269.358022 269.358022 0 0 1 278.447461 89.651775l2.945438 3.670292 9.008899-7.075955a280.817618 280.817618 0 0 0-293.358741-97.28zM652.598652 150.148315l-4.521708 10.516134a378.293213 378.293213 0 0 1 158.317303 126.377708l3.854382 5.430652 9.411596-6.523685a389.59173 389.59173 0 0 0-167.061573-135.800809z m-444.726652 51.061932l-1.357663 26.670023-20.675595 17.477033 26.117752 10.090427 11.551641 24.426427 17.557573-20.29591 27.671011-2.266607-15.290966-22.758112 5.603236-25.899146-26.980674 6.408629-24.196315-13.852764zM366.453933 98.844764l-6.420135 25.922157-23.644045 13.231461 23.701573 14.865258 6.673258 26.186787 21.112809-16.579596 27.590472 3.037484-10.654202-25.243326 10.447101-24.368899-27.705528 1.150562-21.101303-18.201888z m195.894651-4.452674l-14.036854 24.10427-26.577977 7.938876 17.810696 19.628584-1.86391 27.348854 25.105259-11.873798 25.346876 8.801798-2.209078-26.946157 17.569078-21.791641-26.635505-4.786337-14.508585-22.424449z" fill="#cdcdcd" p-id="3368"></path></svg>
      <div class="header">
        <div class="avatar">
          <img :src="scholar.avatar" alt="Avatar">
        </div>
        <div class="info">
          <h2>{{ scholar.name }}</h2>
          <p>{{ scholar.title }}</p>
        </div>
      </div>
      <div class="content">
        <p>{{ scholar.englishAffiliation }}</p>
        <div class="buttons" >

          <!-- Homepage -->
          <el-tooltip
              class="box-item"
              effect="dark"
              placement="top-start"
            >
            <template #content> HomePage:<br/>{{ scholar.officialWebsite }} </template>
          <el-button type="primary" color="#626aef" @click="goToHomepage" circle>
            <el-icon><House /></el-icon>
            </el-button>
          </el-tooltip>


          <!-- email -->
          <el-tooltip
              class="box-item"
              effect="dark"
              placement="top-start"
            >
            <template #content> Email:<br/>{{ scholar.address }} </template>
            <el-button type="primary" color="#626aef" @click="goToEmail" circle>
              <el-icon><Message /></el-icon>
            </el-button>
          </el-tooltip>

          <!-- google -->
          <el-tooltip
              class="box-item"
              effect="dark"
              placement="top-start"
            >
            <template #content> Google:<br/>{{ scholar.google }} </template>
          <el-button type="primary" color="#626aef" @click="goToGoogle" circle>
            <svg t="1703259457270" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4223" width="14.5" height="17"><path d="M881 442.4H519.7v148.5h206.4c-8.9 48-35.9 88.6-76.6 115.8-34.4 23-78.3 36.6-129.9 36.6-99.9 0-184.4-67.5-214.6-158.2-7.6-23-12-47.6-12-72.9s4.4-49.9 12-72.9c30.3-90.6 114.8-158.1 214.7-158.1 56.3 0 106.8 19.4 146.6 57.4l110-110.1c-66.5-62-153.2-100-256.6-100-149.9 0-279.6 86-342.7 211.4-26 51.8-40.8 110.4-40.8 172.4S151 632.8 177 684.6C240.1 810 369.8 896 519.7 896c103.6 0 190.4-34.4 253.8-93 72.5-66.8 114.4-165.2 114.4-282.1 0-27.2-2.4-53.3-6.9-78.5z" p-id="4224" fill="#ffffff"></path></svg>
            </el-button>
          </el-tooltip>

          <!-- twitter -->
          <el-tooltip
              class="box-item"
              effect="dark"
              placement="top-start"
            >
            <template #content> Twitter:<br/>{{ scholar.twitter }} </template>
          <el-button type="primary" color="#626aef" @click="goToTwitter" circle>
            <svg t="1703260407083" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="12366" width="14.5" height="17"><path d="M967.97698918 285.54371282a19.51843191 19.51843191 0 0 0-23.15815385-15.03267009l-56.71851397 12.08261653a1140.39525014 1140.39525014 0 0 0 12.82829859-18.4658416 580.79646268 580.79646268 0 0 0 14.74443304-22.89442279 287.00940399 287.00940399 0 0 0 7.02271453-12.18880912l3.37599089-6.60261197c1.12027351-2.28022336 2.17986553-4.92920342 3.2382906-7.40430769a17.92087521 17.92087521 0 0 0-23.34603306-23.61443191l-3.13093105 1.30348491c-4.45425413 1.56604901-8.83265641 3.19394644-13.26123761 4.6911453-4.51610256 1.3466621-8.94468376 2.80068376-13.47362279 4.05282279-4.57795099 1.15294815-9.06954758 2.43076011-13.66150199 3.47051396-4.62812992 0.9709037-9.17574017 2.07250598-13.81087179 2.9372171-4.67364103 0.80753048-9.26559544 1.73525697-13.94973904 2.44943133-4.69814701 0.66399544-9.3461151 1.41551226-14.04426211 2.01065755-3.11225983 0.39442963-6.23852308 0.71417436-9.35778462 1.0455886a169.70043077 169.70043077 0 0 0-41.38477037-30.21704387c-20.42165242-10.60408889-42.7454359-16.83094245-65.04471338-18.99797151-22.31794872-2.18570029-44.65456867-0.43177208-66.03895612 4.57911795a213.79719658 213.79719658 0 0 0-60.77833846 24.6168433c-18.87310769 11.2809208-36.12415271 25.60058348-50.61185641 42.70109174-14.47603418 17.06199886-26.08953618 36.98769687-33.5055134 58.49111339-7.47315784 21.47891054-10.62976183 44.36749857-9.82806609 66.64810485 0.19488091 6.27003077 0.73984729 12.47121139 1.5345413 18.60937664-3.03757492-0.34425072-6.08215157-0.66983021-9.11972649-1.08409802a444.38799316 444.38799316 0 0 1-25.85731282-4.03998631 460.24803191 460.24803191 0 0 1-25.65659715-5.33646952 520.86999886 520.86999886 0 0 1-50.47415612-14.5577208 541.65340627 541.65340627 0 0 1-49.00263021-19.57444558C261.22677607 305.91401936 202.27938462 263.95860968 149.89492877 214.54988034a18.86727293 18.86727293 0 0 0-31.5392 6.01913618l-0.47611624 1.24630428c-2.11685014 5.53718518-4.13334245 11.13155099-5.73089915 16.85661538-1.5975567 5.71806268-3.00723418 11.50614245-3.99097435 17.36307236-1.09576752 5.83825869-1.81577664 11.74420056-2.26038518 17.65130941-0.51345869 5.91294359-0.64532422 11.83872364-0.59514531 17.75166723 0.09335612 5.90710883 0.42010256 11.81421766 0.97673847 17.69565357a235.22242735 235.22242735 0 0 0 2.48093903 17.50077264 231.05407636 231.05407636 0 0 0 9.05087635 34.07498576 221.44072934 221.44072934 0 0 0 6.42756923 16.45635099 205.80591226 205.80591226 0 0 0 7.65987009 15.99773904 205.06723191 205.06723191 0 0 0 8.92017778 15.47727863 191.87367749 191.87367749 0 0 0 10.25400341 14.890302 189.47675897 189.47675897 0 0 0 5.64337779 7.17675213c-4.70981652 0.6336547-9.44063817 1.15294815-14.18779715 1.49719886-4.25937322 0.30807521-8.53041595 0.47028149-12.59024046 0.39559658-2.09234415 0-4.07732877-0.08752136-5.95728775-0.25089458-2.07250598-0.08168662-3.53236239-0.39442963-5.35514075-0.57647408a11.90757379 11.90757379 0 0 0-17.12501424 10.44188262l-0.01867122 0.93939601c-0.13186553 5.92578005-0.11319431 11.90173903 0.42010256 17.91504046a135.44806838 135.44806838 0 0 0 2.7925151 18.00256182 132.70573219 132.70573219 0 0 0 13.12353732 34.52542907c5.95028604 10.88765812 13.36042849 20.93511111 21.63528205 29.97315099a200.7063339 200.7063339 0 0 0 26.99625755 24.40329116c17.60929915 13.31725128 36.61894017 23.87816296 56.01134132 32.89869859-1.04558861 0.30690826-2.08534245 0.63832251-3.13793276 0.92655953-2.38641595 0.62665299-4.76699715 1.35949857-7.1779191 1.84728434-2.40508718 0.50762393-4.82301082 1.17862108-7.24676923 1.57888547-4.85451851 0.93356125-9.74754644 1.69207977-14.65807863 2.26155213-4.91053219 0.53796467-9.81522963 0.83320342-14.7456 0.98957494a18.54052649 18.54052649 0 0 0-18.68406154 27.2669903l0.81336525 1.48436239c9.90975271 18.10875441 23.12664615 33.68055612 37.58400911 47.16001369 14.50637492 13.50513048 30.34774245 25.03111111 46.80876125 35.18358974a415.86886382 415.86886382 0 0 0 47.76332764 25.04978234c-1.2288 0.80753048-2.41909059 1.65940513-3.6525584 2.44943133a364.0235396 364.0235396 0 0 1-53.70661197 28.49345641c-18.59770713 7.89909516-37.80923077 14.08160456-57.22030313 17.79017665-4.83584729 0.90205356-9.69736752 1.65940513-14.57522508 2.28605811a241.32558405 241.32558405 0 0 1-14.57055726 1.25914074 219.27019944 219.27019944 0 0 1-14.4877037 0.13069858 197.96166382 197.96166382 0 0 1-14.31849573-1.07009459h-0.01400342l-0.19954872-0.03850941a23.13831567 23.13831567 0 0 0-13.84354644 43.47828149c18.8416 9.72070655 38.26550883 19.04815043 58.48527863 27.18997151a449.10481139 449.10481139 0 0 0 62.61395329 20.20226553 463.77572649 463.77572649 0 0 0 64.94318859 10.74762393c10.86781995 0.88338234 21.74147465 1.69791453 32.57195215 1.99198632 5.39365014 0.29523875 10.91099715 0.30807521 16.41200683 0.34541766 5.45549857 0.02450598 11.15605697 0.14353505 16.21012422-0.03734244l15.58463818-0.35125243 16.54854016-0.91489003c10.82464274-0.41310085 21.61077607-1.74692649 32.41558064-2.76217436 21.55359544-2.63030883 43.09552136-5.99463021 64.33053902-11.09304159 21.30853561-4.71098348 42.26698575-11.18756467 62.90685812-18.55452991 20.63987236-7.42764672 40.69043418-16.52986894 60.32789516-26.47696411 19.3982359-10.40920798 38.40904388-21.66562279 56.380098-34.52542905 17.85202508-12.97883533 35.30962051-26.64617208 51.21400342-42.0370963 16.0105755-15.24038747 31.23695954-31.37582678 44.92413448-48.75173561 7.14057664-8.47440228 13.36159544-17.62096867 19.95020398-26.48980058 6.03780741-9.24459031 12.43386894-18.28379715 17.91504046-27.86680341 11.56915784-18.82993048 21.42756467-38.60509174 30.43526382-58.69299601 8.95752023-20.14391795 16.38049915-40.85264046 22.96327293-61.80525584 6.20118063-21.04013675 11.75703704-42.28682393 15.6348171-63.81591339 2.192702-10.63092877 3.78325697-21.73563989 5.38664843-32.81701197 0.91489003-5.6935567 1.40384274-10.7604604 1.96047864-15.92188718l0.36992364-3.33281367c1.4913641-1.35366382 3.05741311-2.65598176 4.47292536-4.04582109l7.6668718-7.44165013c2.59296638-2.43659487 4.94203989-5.11124787 7.42881367-7.65520229 2.41792364-2.59296638 4.94203989-5.07974017 7.24093447-7.76722963l7.00871111-7.96094359c2.36190997-2.61863931 4.50443305-5.43099259 6.75898347-8.13015157 2.2358792-2.72483191 4.48459487-5.42515784 6.57693904-8.25034757a404.60077949 404.60077949 0 0 0 24.07771167-34.47525014 383.96790883 383.96790883 0 0 0 10.69277721-18.12742564c1.68507806-3.12626325 3.37599088-6.18250941 4.97938234-9.39629402a251.46872707 251.46872707 0 0 0 4.90469744-10.13497436l1.14011168-2.46810257a19.5429379 19.5429379 0 0 0 1.35366381-12.23315327z m-86.35441596 51.93401253c-2.17286382 2.18570029-4.47175841 4.240702-6.74498006 6.31320798-2.28722508 2.04916695-4.47876011 4.20335954-6.85934131 6.15800342l-7.00287635 5.95145299c-2.29889458 2.01649231-4.79150313 3.80776296-7.16508263 5.72389744-2.43076011 1.84845128-4.74249117 3.84627236-7.24210141 5.57569458l-7.39847295 5.32946781c-4.89769572 3.55920228-10.07079202 6.70296979-15.05717606 10.07312593a29.32782678 29.32782678 0 0 0-12.68476353 21.44040114l-0.09335613 1.04675554-1.41551225 15.52745756c-0.46327977 5.18126495-0.90205356 10.46755556-1.59172193 15.05250826-1.23930256 9.50832136-2.38641595 19.00380627-4.23370029 28.78169345-3.14493447 19.46825299-7.80457208 38.57358405-13.00450827 57.49570371-5.54301995 18.80425755-11.82588718 37.38912821-19.44841481 55.38585526-7.68554303 17.9453812-16.07359088 35.62819829-26.00784957 52.39612535-4.64796809 8.58176183-10.19098803 16.59405128-15.33957835 24.87473961-5.68188718 7.88625869-10.98684901 16.07942564-17.14485242 23.61443191-11.74420056 15.52745755-24.90508034 29.90896867-38.74279203 43.57747236-13.72335043 13.81203875-28.90655726 26.069698-44.43518176 37.827902-15.65232136 11.63100627-32.30822108 21.87334017-49.34571396 31.44934473-17.30122393 9.11389174-35.00271226 17.57779146-53.38103248 24.5421584-18.37832023 6.91535498-37.10672593 13.11653561-56.32408433 17.70265527-19.11700056 4.96654587-38.66694017 8.35537322-58.31607065 11.11171282-9.87241026 1.08293106-19.70631111 2.51127977-29.66040798 3.0504114l-14.56355556 1.08993277-15.57763646 0.63248774c-5.33063476 0.28240228-10.02178005 0.21355213-14.96381995 0.28823705-4.89186097 0.05017892-9.77205242 0.13770029-14.76427123-0.04434417-9.95993162-0.10035784-19.82534017-0.66399544-29.69074872-1.28364673a414.61672479 414.61672479 0 0 1-58.16553389-8.55608888 347.42482051 347.42482051 0 0 1-14.21347008-3.43317151 366.20923989 366.20923989 0 0 0 31.00590312-9.19557836 421.21233505 421.21233505 0 0 0 64.30486611-28.70000683c20.58385869-11.33109971 40.33918176-24.23525014 59.13060285-39.27492193a31.40733447 31.40733447 0 0 0-11.11171282-54.73352935l-2.4120889-0.66399544-0.00583475-0.01166952c-32.78433732-5.469502-65.53249915-14.98365812-95.74837608-28.79569686-15.07701425-6.92819146-29.52854245-15.01399886-42.60773561-24.50364901-0.52512821-0.38276011-1.00824615-0.80169572-1.53454131-1.18445583 1.61039316-0.10619259 3.22078633-0.21938689 4.83001254-0.31274302a226.63833162 226.63833162 0 0 0 18.31530485-2.0048228 228.4797812 228.4797812 0 0 0 36.54892307-8.48140399 174.87352707 174.87352707 0 0 0 18.2849641-6.93402621c3.05041139-1.24630428 6.10665755-2.88703817 9.16407065-4.3970735 3.05741311-1.53454131 6.12649572-3.44484103 9.18857665-5.19293447a30.14235897 30.14235897 0 0 0-5.18593277-54.67051396l-6.63411965-2.28722507c-20.57685697-2.97455954-40.80246154-6.82666667-60.36407066-12.19464388-19.53126838-5.38081367-38.44171851-12.27049572-55.6285812-21.53492422-17.15768889-9.25859373-32.55444787-20.99695954-43.99174016-35.88609459a100.91096979 100.91096979 0 0 1-13.93690257-24.49781423 100.78493903 100.78493903 0 0 1-2.58129687-7.38446952c2.70732764 0.93939601 5.36797721 1.96631338 8.11848205 2.76800911a269.45728547 269.45728547 0 0 0 29.45852536 6.90251852 232.34239088 232.34239088 0 0 0 30.7993527 3.49618689c2.63030883 0.18671226 5.43799431 0.1178621 8.1873322 0.14936981 2.71899715 0.07585185 5.68072023-0.16337322 8.58059487-0.31274302 2.82518974-0.0746849 6.10198974-0.62665299 9.21424957-1.02691738 3.09475556-0.38859487 6.87801253-1.45402165 10.31585186-2.29305983 9.565502-2.40508718 17.95938462-9.47681367 21.42989857-19.49275897v-0.00700172a30.2357151 30.2357151 0 0 0-18.68522849-38.45922279l-3.74007977-1.29648319c-2.91737892-1.00941311-6.06348034-2.03633048-9.31344046-3.84627236-3.25812877-1.61039316-6.55826781-3.75174928-9.86540854-6.01330143-6.58394074-4.71681824-13.02317949-10.51073277-19.01780969-16.9814792-12.00793162-12.97883533-22.27360456-28.55063704-30.06067236-45.22520798a181.02569572 181.02569572 0 0 1-9.76505072-25.84447635 189.8326792 189.8326792 0 0 1-3.30714074-13.39193618 175.15592934 175.15592934 0 0 1-2.14252308-13.57398063 142.93989744 142.93989744 0 0 1-0.92655953-13.66733676 116.6951567 116.6951567 0 0 1-0.01867124-6.28286723c45.49477379 43.71517265 96.60025072 82.41945527 153.42612422 112.35409687a594.00051966 594.00051966 0 0 0 52.47314416 24.49898119 576.21150997 576.21150997 0 0 0 54.86422792 19.26053561 520.92367864 520.92367864 0 0 0 28.15620741 7.55484445 509.26816638 509.26816638 0 0 0 28.53780057 6.13233049 567.15363191 567.15363191 0 0 0 28.8260376 4.70981652c9.64718861 1.35366382 19.33055271 2.37474644 29.02675328 3.31414245a31.69440456 31.69440456 0 0 0 32.35956695-41.78620171l-0.20655042-0.60681481c-5.11824957-15.06534473-8.43122508-30.36874758-8.8571624-45.38274644-0.52629516-15.00699715 1.55321253-29.70941995 6.34471567-43.50862223 9.43363646-27.62407749 30.10501652-51.52674644 56.50612878-67.23624843 26.30308832-15.80402508 58.09785072-23.39504502 87.8014359-20.45082621 14.83778918 1.44701995 29.08860171 5.50567749 41.82937891 12.11295727 12.76645014 6.59094245 23.97151909 15.76668262 33.27329003 27.01726267l7.3728 6.30737322a24.7615453 24.7615453 0 0 0 23.35770256 4.7296547 709.68159544 709.68159544 0 0 0 30.0478359-10.03578348c4.96771282-1.80294017 9.92142223-3.77625527 14.8517926-5.65621423 4.92920342-1.93480569 9.81406268-4.10183476 14.70125583-6.144 2.7563396-1.18445585 5.49284103-2.4552661 8.22467465-3.74007978a1120.60258462 1120.60258462 0 0 1-22.78239545 41.96824616h-0.00583475a11.62517151 11.62517151 0 0 0 9.27026324 18.9162849l2.32340058-0.05017892 44.3861698-0.95806723a362.47032707 362.47032707 0 0 1-23.82098234 25.22482506z" fill="#ffffff" p-id="12367"></path></svg>
            </el-button>
          </el-tooltip>


          <!-- facebook -->
          <el-tooltip
              class="box-item"
              effect="dark"
              placement="top-start"
            >
            <template #content> Facebook:<br/>{{ scholar.facebook }} </template>
            <el-button type="primary" color="#626aef" @click="goToFaceBook" circle>
              <svg t="1703260607288" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="13550" width="14.5" height="17"><path d="M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32z m-32 736H663.9V602.2h104l15.6-120.7H663.9v-77.1c0-35 9.7-58.8 59.8-58.8h63.9v-108c-11.1-1.5-49-4.8-93.2-4.8-92.2 0-155.3 56.3-155.3 159.6v89H434.9v120.7h104.3V848H176V176h672v672z" p-id="13551" fill="#ffffff"></path></svg>
            </el-button>
          </el-tooltip>
          
        </div>
        <div class="actions">
          <el-button type="primary" color="#626aef" v-if="!isfollowed" @click="follow" plain><el-icon><Star /></el-icon>{{ i18n.t("authorHome.follow") }}</el-button>
          <el-button type="primary" color="#626aef" v-else @click="unfollow" ><el-icon><Star /></el-icon>{{ i18n.t("authorHome.followed") }}</el-button>

          <el-button type="primary" color="#626aef" @click="showDialog()" v-if="!this.isAuthorBinded" plain><el-icon><Avatar /></el-icon>{{ i18n.t("authorHome.claim") }}</el-button>
          <el-button type="primary" color="#626aef" v-else >{{ i18n.t("authorHome.claimed") }}</el-button>
          <el-button type="primary" color="#626aef" @click="share()" plain><el-icon><Share /></el-icon>{{ i18n.t("authorHome.share") }}</el-button>

          <el-dialog title="认证学者" v-model="dialogVisible" :close-on-click-modal="false">
      <el-form :model="form" :rules="rules" ref="form" label-width="80px">
        <el-form-item label="上传图片">
          <el-upload
            class="avatar-uploader"
            ref="uploadBox"
            action="action"
            :show-file-list="true"
            :before-upload="beforeAvatarUpload"

            :http-request="uploadForm"
            :auto-upload="false"
          >
          <el-button type="primary">Click to upload</el-button>
            <img v-if="imageUrl" :src="imageUrl" class="avatar">
            <i v-else class="el-icon-plus avatar-uploader-icon"></i>
          </el-upload>
        </el-form-item>
        <el-form-item label="备注" prop="remark">
          <el-input v-model="form.remark"></el-input>
        </el-form-item>
      </el-form>
      <span slot="footer" class="dialog-footer">
        <el-button @click="dialogVisible = false">取消</el-button>
        <el-button type="primary" @click="submitForm">确定</el-button>
      </span>
    </el-dialog>
        </div>
      </div>
    </div>
  </template>


<script setup>
import i18n from "../../locales";
</script>
  
  <script>
import get from "../../functions/Get.js";
import request from "../../functions/Request.js"
import { ElMessage } from 'element-plus'
import router from "../../routes";



  export default {
    name: 'ScholarCard',
    props: {
      scholar: {
        type: Object,
        required: true
      }
    },

    data(){

        return{
          links: [
            { id: 1, url: 'https://example.com' },
            { id: 2, url: 'https://example.com/research' },
            { id: 3, url: 'https://example.com/papers' }
            ],
          
            isfollowed: false,
            isclaimed:false,
            scholar_id:'',
            isUserBinded: false,
            isAuthorBinded: false,


            dialogVisible:false,
            imageUrl: '',
            form: {
              remark: '',
            },
            rules: {
              remark: [{ required: true, message: '请输入备注', trigger: 'blur' }],
            },
            file:'',
        };
    },

    methods:{

      async share(){
        console.log("scholar id:",this.scholar_id)
        const part = this.scholar_id.split("/");
        const id = part[part.length-1]
      // const url = 'buaa-q9k.xyz/authorhome/A5069285356';
      const url = 'buaa-q9k.xyz/authorhome/'+id;
    try {
    await navigator.clipboard.writeText(url);
    ElMessage({
      message: '学者链接已复制成功',
      type: 'success',
    });
    } catch (err) {
    console.error('复制失败：', err);
    ElMessage({
      message: '复制失败，请手动复制链接',
      type: 'error',
    });
    }
      
   
      },


      showDialog(){
        if(this.isUserBinded){
          ElMessage("您已绑定学者")
        }
        else{
          this.dialogVisible = true
        }
        

        this.$refs.form.resetFields(); // 清空表单
        this.$refs.uploadBox.clearFiles();
      },

      async uploadForm(){
        console.log("start uploading.....")
        console.log("remark:",this.form.remark)
        const result = await request(
        {
            url: '/user/apply_for_certification/',
            params:{
              idcard_img: this.file,
              author_id: this.scholar_id,
              remark: this.form.remark,
            },
            addToken: true,
            useTestEnv:false,
            testEnv: 'http://100.103.70.173:8000',
        }
        );
        console.log(result)
        if(result){
           ElMessage({
            message: "发送认领申请成功",
            type: 'success',
          })
          
          
          
        }
    },
    handleAvatarSuccess(res) {
      this.imageUrl = URL.createObjectURL(res.raw);
    },
    beforeAvatarUpload(file) {
      console.log(" file to upload:",file)
      const isJPG = file.type === 'image/jpeg';
      const isPNG = file.type === 'image/png';
      const isLt2M = file.size / 1024 / 1024 < 5;

      if (!isJPG && !isPNG) {
        ElMessage('上传头像图片只能是 JPG/PNG 格式!');
        console.log('上传头像图片只能是 JPG/PNG 格式!')
        return false;
      }
      if (!isLt2M) {
        ElMessage('上传头像图片大小不能超过 5MB!');
        console.log("上传头像图片大小不能超过 5MB!")
        return false;
      }
      this.file = file
      console.log("ready to upload")
      return true;
    },
    submitForm() {
      this.$refs.form.validate((valid) => {
        if (valid) {
          // 调用后端接口上传数据
          this.$refs.uploadBox.submit()

          // this.$refs.form.resetFields(); // 清空表单
          // this.$refs.uploadBox.clearFiles();
          this.dialogVisible = false;
          //this.$message.success('认证学者成功');
        } else {
          return false;
        }
      });
    },


    goToHomepage() {
      // const homepageUrl = scholar.officialWebsite;
      // if (homepageUrl) {
      //   window.open(homepageUrl, '_blank');
      // }
      const part = this.scholar.scholar_id.split("/");
        const id = part[part.length-1]
      console.log("goto: ",'/authorhome/'+id)
      router.push(`/authorhome/${id}`);
    },
    goToEmail() {
      // const emailUrl = this.links.find(link => link.id === 2)?.url;
      // if (emailUrl) {
      //   window.open(emailUrl, '_blank');
      // }
    },
    goToTwitter() {
      const twitterUrl = scholar.twitter;
      if (twitterUrl) {
        window.open(twitterUrl, '_blank');
      }
    },

    goToGoogle() {
      const Url = scholar.google;
      if (Url) {
        window.open(Url, '_blank');
      }
    },

    goToGoogle() {
      const Url = scholar.facebook;
      if (Url) {
        window.open(Url, '_blank');
      }
    },



    async follow(){
        console.log("follow:",this.scholar_id)
        const result = await request(
        {
            url: '/user/follow_scholar/',
            params:{
              scholar_id: this.scholar_id
            },
            addToken: true,
            useTestEnv:false,
            testEnv: 'http://100.117.229.168:8000',
        }
        );
        if(result){
          ElMessage({
            message: '关注成功',
            type: 'success',
          })
        }
        
        console.log(result)
        this.isfollowed = true

    },

    

    async unfollow(){
      const result = await request(
        {
            url: '/user/unfollow_scholar/',
            params:{
              scholar_id: this.scholar_id
            },
            addToken: true,
            useTestEnv:false,
            testEnv: 'http://100.117.229.168:8000',
        }
        );
        if(result){
          ElMessage({
            message: '取关成功',
            type: 'success',
          })
        }
        
        console.log(result)
        this.isfollowed = false
    },


    async isAuthorFollowed(){
      const result = await get(
        {
            url: '/user/check_author_follow/',
            params:{
              author_id: this.scholar_id
            },
            addToken: true,
            useTestEnv:false,
            testEnv: 'http://100.117.229.168:8000',
        }
        );
        
        
        console.log(result)
        this.isfollowed = result.data.followed
    },

    async getIsUserBinded(){
      const result = await get(
        {
            url: '/user/get_certification_status/',
            params:{
              // author_id: this.scholar_id
            },
            addToken: true,
            useTestEnv:false,
            testEnv: 'http://100.117.229.168:8000',
        }
        );
        
        console.log("isUserBinded",result)
        
        if(result.data.status == '已认证')
          this.isUserBinded = true
          console.log("isUserBinded",this.isUserBinded)
    },

    async getIsAuthorBinded(){
      const result = await get(
        {
            url: '/user/check_author_authentication/',
            params:{
              author_id: this.scholar_id
            },
            //addToken: true,
            useTestEnv:false,
            testEnv: 'http://100.103.70.173:8000',
        }
        );
        
        console.log("isAuthorBinded",result)
        
        this.isAuthorBinded = result.data
    }



    },

    

    mounted(){

     
      // // 在这里可以处理接收到的 scholar_id 数据
      this.$nextTick(() => {
        console.log("scholar_id:",this.scholar.scholar_id)
        this.scholar_id = this.scholar.scholar_id
        this.isAuthorFollowed()
        this.getIsAuthorBinded()
        this.getIsUserBinded()
      })
      
      // this.isAuthorFollowed()
    }

  }
  </script>
  
  <style scoped>
  .binded{
    position: absolute;
    left: 20vw;
    top:25vh;
    z-index: 2;
  }

  .scholar-card {
    background-color: #6e83f7;
    color: white;
    padding: 20px;
    border-radius: 8px;
    margin-bottom: 2.5vh;
    z-index: 1;
  }
  
  .header {
    /* background-color: #6e83f7; */
    width: 100%;

    display: flex;
    align-items: center;
    z-index: 3;
  }
  
  .avatar {
    width: 100px;
    height: 100px;
    border-radius: 50%;
    overflow: hidden;
    margin-right: 20px;
  }
  
  .avatar img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
  
  .info h2 {
    font-size: 24px;
    margin-bottom: 4px;
  }
  
  .content {
    margin-top: 20px;
    text-align: left;
    /* background-color: aliceblue; */
  }
  
  .buttons a {
    display: inline-block;
    margin-right: 10px;
    color: white;
    text-decoration: none;
  }
  
  .actions button {
    margin-top: 10px;
  }
  </style>